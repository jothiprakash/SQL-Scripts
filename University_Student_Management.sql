SHOW USER;

SELECT * FROM TAB;

-------------- APPLICANT TABLE -------------------------------------------------

CREATE TABLE APPLICANT_TABLE(
    APPLICANTID VARCHAR2(4),
    APPLICANTNAME VARCHAR2(30) NOT NULL,
    EMAILID VARCHAR2(30) UNIQUE,
    ADDRESS VARCHAR2(50),
    CITY VARCHAR2(15),
    CONSTRAINT PK_AID PRIMARY KEY(APPLICANTID)
    );
    
    
--CREATE TABLE TABLE_NAME(
--    APPLICANT_ID VARCHAR(4),
--    APPLICANT_NAME VARCHAR(10) NOT NULL,
--    CONSTRAINT PK_AID PRIMARY KEY(APPLICANT_ID)
--    );
    
    
CREATE TABLE BRANCH_TABLE(
    BRANCHID NUMBER(2),
    BRANCHNAME VARCHAR2(30) NOT NULL,
    CONSTRAINT BRANCH_PK PRIMARY KEY(BRANCHID),
    CONSTRAINT CH_BRANCH CHECK(BRANCHID LIKE 'B%')
    );
    
CREATE TABLE COURSE_TABLE(
    COURSEID VARCHAR2(4),
    COURSENAME VARCHAR2(30) NOT NULL,
    SEMESTER NUMBER(1),
    BRANCHID NUMBER(2),
    ELECTIVE CHAR(1),
    PROJECTMARKS NUMBER(3),
    ASSIGNMENTMARKS NUMBER(3),
    INTERNALMARKS NUMBER(3),
    SEMESTEREXAMMARKS NUMBER(3),
    CONSTRAINT PK_CID PRIMARY KEY(COURSEID),
    CONSTRAINT FK_BID FOREIGN KEY(BRANCHID) REFERENCES BRANCH_TABLE(BRANCHID),
    CONSTRAINT YN_CHK CHECK(ELECTIVE = 'Y' OR ELECTIVE = 'N')
    );
    
CREATE TABLE STUDENT_TABLE(
    STUDENTID VARCHAR(4),
    APPLICANTID VARCHAR(4),
    CURRENTSEMESTER NUMBER(1),
    USERID VARCHAR(15) UNIQUE,
    PASSWORD VARCHAR(15) NOT NULL,
    CONSTRAINT PK_SID PRIMARY KEY(STUDENTID),
    CONSTRAINT FK_AID FOREIGN KEY(APPLICANTID) REFERENCES APPLICANT_TABLE(APPLICANTID)
    );
    
CREATE TABLE REGISTRATION_TABLE(
    STUDENTID VARCHAR(4),
    COURSEID VARCHAR(4),
    DATEOFEXAM DATE,
    PROJECTMARKS NUMBER(3),
    ASSIGNMENTMARKS NUMBER(3),
    INTERNALMARKS NUMBER(3),
    SEMESTERMARKS NUMBER(3),
    GRADE CHAR(1),
    CONSTRAINT PK_COMPOID PRIMARY KEY(STUDENTID, COURSEID),
    CONSTRAINT FK_SID FOREIGN KEY(STUDENTID) REFERENCES STUDENT_TABLE(STUDENTID),
    CONSTRAINT FK_CID FOREIGN KEY(COURSEID) REFERENCES COURSE_TABLE(COURSEID)    
    );
    
CREATE TABLE DEPARTMENT_TABLE(
    DEPARTMENTID NUMBER(2),
    DEPARTMENTNAME VARCHAR(30) NOT NULL,
    HEADOFDEPARTMENT NUMBER(4),
    CONSTRAINT PK_DID PRIMARY KEY(DEPARTMENTID)
    );
    
ALTER TABLE DEPARTMENT_TABLE MODIFY HEADOFDEPARTMENT VARCHAR(4);
    
CREATE TABLE INSTRUCTOR_TABLE(
    INSTRUCTORID VARCHAR(4),
    INSTRUCTORNAME VARCHAR(30) NOT NULL,
    DATEOFJOINING DATE,
    DEPARTMENTID NUMBER(2),
    CONSTRAINT PK_IID PRIMARY KEY(INSTRUCTORID),
    CONSTRAINT FK_DID FOREIGN KEY(DEPARTMENTID) REFERENCES DEPARTMENT_TABLE(DEPARTMENTID)
    );
    
ALTER TABLE DEPARTMENT_TABLE ADD CONSTRAINT FK_HODID FOREIGN KEY(HEADOFDEPARTMENT) REFERENCES INSTRUCTOR_TABLE(INSTRUCTORID);
    
CREATE TABLE COURSE_ALLOCATION_TABLE(
    ALLOCATIONID VARCHAR(4),
    COURSEID VARCHAR(4),
    INSTRUCTORID VARCHAR(4),
    STARTDATE DATE,
    ENDDATE DATE,
    CONSTRAINT PK_ALLOCATIONID PRIMARY KEY(ALLOCATIONID),
    CONSTRAINT FK_COURSEID FOREIGN KEY(COURSEID) REFERENCES COURSE_TABLE(COURSEID),
    CONSTRAINT FK_INSTRUCTORID FOREIGN KEY(INSTRUCTORID) REFERENCES INSTRUCTOR_TABLE(INSTRUCTORID)
    );
    
CREATE TABLE HOSTEL_TABLE(
    HOSTELID VARCHAR(10),
    ROOMNO NUMBER(3),
    STUDENTID VARCHAR(4),
    HOSTELFEE NUMBER(6),
    CONSTRAINT PK_HRID PRIMARY KEY(HOSTELID, ROOMNO),
    CONSTRAINT FK_STUDENTID FOREIGN KEY(STUDENTID) REFERENCES STUDENT_TABLE(STUDENTID),
    CONSTRAINT CHK_FEE CHECK(HOSTELFEE > 0)
    );
    
CREATE TABLE ATTENDANCE_TABLE(
    STUDENTID VARCHAR(4),
    COURSEID VARCHAR(4),
    TOTALLECTUREDAYS NUMBER(3),
    NOOFDAYSPRESENT NUMBER(3),
    CONSTRAINT FK_STUDID FOREIGN KEY(STUDENTID) REFERENCES STUDENT_TABLE(STUDENTID),
    CONSTRAINT FK_COID FOREIGN KEY(COURSEID) REFERENCES COURSE_TABLE(COURSEID),
    CONSTRAINT CHK_LECT CHECK(TOTALLECTUREDAYS > 0)
    );
    
    
-- DATA GENERATING SECTION

DESC APPLICANT_TABLE;
--INSERT INTO APPLICANT_TABLE VALUES('&APPLICANTID', '&APPLICANTNAME', '&EMAILID', '&ADDRESS', '&CITY');
INSERT INTO APPLICANT_TABLE VALUES('A1', 'JOTHI PRAKASH', 'JOTHIPRAKASHANANDAN@GMAIL.COM', '13, P.M.THEVAR NAGAR', 'MADURAII');
INSERT INTO APPLICANT_TABLE VALUES('A2', 'DHARMIK MEHTA', 'DHARMIK@GMAIL.COM', 'YOHO, BANGALORE', 'GUJARAT');
INSERT INTO APPLICANT_TABLE VALUES('A3', 'VIPLOVE BANDHE', 'VIPLOVE@GMAIL.COM', 'ANDHERI', 'MUMBAI');
INSERT INTO APPLICANT_TABLE VALUES('A4', 'MANISH C KONNUR', 'MANISH@GMAIL.COM', 'HOSA ROAD', 'BANGALORE');

DESC BRANCH_TABLE;
--INSERT INTO BRANCH_TABLE VALUES('&BRANCHID', '&BRANCHNAME');
INSERT INTO BRANCH_TABLE VALUES('B1', 'HOSA ROAD');
INSERT INTO BRANCH_TABLE VALUES('B2', 'JP NAGAR');
INSERT INTO BRANCH_TABLE VALUES('B3', 'ELECTRONIC CITY');
INSERT INTO BRANCH_TABLE VALUES('B4', 'MANIPAL COUNTY');

DESC COURSE_TABLE;
--INSERT INTO COURSE_TABLE VALUES('&COURSEID', '&COURSENAME', '&SEMESTER', '&BRANCHID', '&ELECTIVE', '&PROJECTMARKS', '&ASSIGNMENTMARKS', '&INTERNALMARKS', '&SEMESTEREXAMMARKS');
INSERT INTO COURSE_TABLE VALUES('C1', 'DBMS', '2', 'B1', 'Y', '90', '80', '20', '80');
INSERT INTO COURSE_TABLE VALUES('C2', 'R', '1', 'B2', 'N', '80', '80', '90', '80');
INSERT INTO COURSE_TABLE VALUES('C3', 'EDA', '3', 'B3', 'N', '80', '80', '80', '80');
INSERT INTO COURSE_TABLE VALUES('C4', 'STATS', '4', 'B4', 'N', '80', '90', '100', '90');
INSERT INTO COURSE_TABLE VALUES('C5', 'ML', '4', 'B4', 'N', '80', '90', '100', '90');

DESC STUDENT_TABLE;
--INSERT INTO STUDENT_TABLE VALUES('&STUDENTID', '&APPLICANTID', '&CURRENTSEMESTER', '&USERID',  '&PASSWORD');
INSERT INTO STUDENT_TABLE VALUES('S1', 'A1', '2', 'USER1',  'USER1PASSWORD');
INSERT INTO STUDENT_TABLE VALUES('S2', 'A2', '4', 'USER2',  'USER2PASSWORD');
INSERT INTO STUDENT_TABLE VALUES('S3', 'A3', '2', 'USER3',  'USER3PASSWORD');
INSERT INTO STUDENT_TABLE VALUES('S4', 'A4', '1', 'USER4',  'USER4PASSWORD');

DESC REGISTRATION_TABLE;
--INSERT INTO REGISTRATION_TABLE VALUES('&STUDENTID', '&COURSEID', '&DATEOFEXAM', '&PROJECTMARKS', '&ASSIGNMENTMARKS', '&INTERNALMARKS', '&SEMESTERMARKS', '&GRADE');
INSERT INTO REGISTRATION_TABLE VALUES('S1', 'C1', '20-MAR-2016', 89, 90, 80, 88, 'S');
INSERT INTO REGISTRATION_TABLE VALUES('S2', 'C2', '04-JUN-2016', '89', '45', '65', '76', 'A');
INSERT INTO REGISTRATION_TABLE VALUES('S3', 'C3', '12-NOV-2015', '54', '67', '87', '90', 'C');
INSERT INTO REGISTRATION_TABLE VALUES('S4', 'C4', '03-JAN-2017', '34', '65', '67', '89', 'D')

DESC DEPARTMENT_TABLE;
--INSERT INTO DEPARTMENT_TABLE VALUES('&DEPARTMENTID', '&DEPARTMENTNAME', '&HEADOFDEPARTMENT');
INSERT INTO DEPARTMENT_TABLE VALUES('1', 'CSE', 'HOD1');
INSERT INTO DEPARTMENT_TABLE VALUES('2', 'IT', 'HOD2');
INSERT INTO DEPARTMENT_TABLE VALUES('3', 'EEE', 'HOD3');
INSERT INTO DEPARTMENT_TABLE VALUES('4', 'ECE', 'HOD4');

DESC INSTRUCTOR_TABLE;
INSERT INTO INSTRUCTOR_TABLE VALUES('&INSTRUCTORID', '&INSTRUCTORNAME', '&DATEOFJOINING', '&DEPARTMENTID');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('I1', 'INSTRUCTOR1', '20-MAR-2016', '1');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('I2', 'INSTRUCTOR2', '10-JUN-2017', '2');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('I3', 'INSTRUCTOR3', '22-JAN-2015', '3');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('I4', 'INSTRUCTOR4', '22-FEB-2014', '4');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('HOD1', 'INSTRUCTOR4', '22-FEB-2014', '1');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('HOD2', 'INSTRUCTOR4', '22-FEB-2014', '2');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('HOD3', 'INSTRUCTOR4', '22-FEB-2014', '3');
-- INSERT INTO INSTRUCTOR_TABLE VALUES('HOD4', 'INSTRUCTOR4', '22-FEB-2014', '4');

DESC COURSE_ALLOCATION_TABLE;
INSERT INTO COURSE_ALLOCATION_TABLE VALUES('&ALLOCATIONID', '&COURSEID', '&INSTRUCTORID', '&STARTDATE', '&ENDDATE');
-- INSERT INTO COURSE_ALLOCATION_TABLE VALUES('AL1', 'C1', 'I1', '12-JAN-2016', '12-JAN-2017');
-- INSERT INTO COURSE_ALLOCATION_TABLE VALUES('AL2', 'C2', 'I2', '20-FEB-2015', '23-FEB-207'); THERE IS A MISTAKE
-- INSERT INTO COURSE_ALLOCATION_TABLE VALUES('AL3', 'C3', 'I3', '12-MAR-2016', '12-MAR-2017');
-- INSERT INTO COURSE_ALLOCATION_TABLE VALUES('AL4', 'C4', 'I4', '12-APR-2016', '12-APR-2017');
--INSERT INTO COURSE_ALLOCATION_TABLE VALUES('AL5', 'C5', 'I4', '12-APR-2016', '12-APR-2017');

DESC HOSTEL_TABLE;
INSERT INTO HOSTEL_TABLE VALUES('&HOSTELID', '&ROOMNO', '&STUDENTID', '&HOSTELFEE');
--INSERT INTO HOSTEL_TABLE VALUES('HOSTEL1', '100', 'S1', '30000');
--INSERT INTO HOSTEL_TABLE VALUES('HOSTEL2', '200', 'S2', '40000');
--INSERT INTO HOSTEL_TABLE VALUES('HOSTEL3', '300', 'S3', '50000');
--INSERT INTO HOSTEL_TABLE VALUES('HOSTEL4', '400', 'S4', '60000');

DESC ATTENDANCE_TABLE;
INSERT INTO ATTENDANCE_TABLE VALUES('&STUDENTID', '&COURSEID', '&TOTALLECTUREDAYS', '&NOOFDAYSPRESENT');
--INSERT INTO ATTENDANCE_TABLE VALUES('S1', 'C1', '433', '333');
--INSERT INTO ATTENDANCE_TABLE VALUES('S2', 'C2', '533', '333');
--INSERT INTO ATTENDANCE_TABLE VALUES('S3', 'C3', '633', '333');
--INSERT INTO ATTENDANCE_TABLE VALUES('S4', 'C4', '733', '333');

-- 1. List the name of different cities from where applicants belong to.
SELECT CITY FROM APPLICANT_TABLE;

-- 2. List the different semesters in which students have enrolled.
SELECT SEMESTER FROM COURSE_TABLE;

-- 3. List the distinct InstructorId and courseid from CourseAllocation table.
--SELECT INSTRUCTORID FROM COURSE_ALLOCATION_TABLE UNION SELECT DISTINCT COURSEID FROM COURSE_ALLOCATION_TABLE;
SELECT DISTINCT INSTRUCTORID, COURSEID FROM COURSE_ALLOCATION_TABLE;
-- 4. List the name of course which are not electives.
SELECT COURSENAME FROM COURSE_TABLE WHERE ELECTIVE = 'N';

-- 5. List the name of instructor who has joined before 01-jan-2002
SELECT INSTRUCTORNAME FROM INSTRUCTOR_TABLE WHERE DATEOFJOINING < '01-JAN-2017';

-- 6. List Id of courses whose ending date is before the current system date.
SELECT COURSEID FROM COURSE_ALLOCATION_TABLE WHERE ENDDATE < SYSDATE;

-- 7. List the name of applicant from Mysore and Bangalore.
SELECT APPLICANTNAME FROM APPLICANT_TABLE WHERE CITY = 'MYSORE' OR CITY = 'BANGALORE';

-- 8. List the name of applicants who do not belong to Mysore.
SELECT APPLICANTNAME FROM APPLICANT_TABLE WHERE CITY != 'MYSORE';

-- 9. List the name of semester 1 and semester 2 courses which belongs to branch B1.
SELECT COURSENAME FROM COURSE_TABLE WHERE SEMESTER = 1 OR SEMESTER = 2 AND BRANCHID = 'B1';

-- 10. List the name of courses which are elective and project marks is equal to 20.
SELECT COURSENAME FROM COURSE_TABLE WHERE ELECTIVE = 'Y' AND PROJECTMARKS = 20;

-- 11. List the name of the course in which project marks is greater than the semester marks.
SELECT COURSENAME FROM COURSE_TABLE WHERE PROJECTMARKS > SEMESTEREXAMMARKS;

-- 12. List the details of all the applicant who belong to Bangalore, Mysore or Hydrabad
SELECT * FROM APPLICANT_TABLE WHERE CITY = 'BANGALORE' OR CITY = 'MYSORE' OR CITY = 'HYDERABAD';

-- 13. List the details of courses which are taught in semester 1, 2 or 3.
SELECT * FROM COURSE_TABLE WHERE SEMESTER = 1 OR SEMESTER = 2 OR SEMESTER = 3;

-- 14. List the studentId who have secured marks between 80 to 100.
SELECT STUDENTID FROM REGISTRATION_TABLE WHERE SEMESTERMARKS < 100 AND SEMESTERMARKS >80;

-- 15. List the student details in ascending order of their applicantid.
SELECT * FROM REGISTRATION_TABLE ORDER BY STUDENTID ASC;

-- 16. List the details of instructor on ascending order of their date of joining.
SELECT * FROM INSTRUCTOR_TABLE ORDER BY DATEOFJOINING ASC;

-- 17. List the details of instructor on descending order of department no and ascending order of Joining date.
SELECT * FROM INSTRUCTOR_TABLE ORDER BY DEPARTMENTID ASC, DATEOFJOINING ASC;

-- 18. List the name of instructors starting with ‘R’ and ending with ‘n’
SELECT INSTRUCTORNAME FROM INSTRUCTOR_TABLE WHERE INSTRUCTORNAME LIKE 'R%N';
UPDATE INSTRUCTOR_TABLE SET INSTRUCTORNAME = 'RSOMETHINGN' WHERE INSTRUCTORNAME = 'INSTRUCTOR1';

-- 19. List the details of instructors whose date of joining is in the month of March.
SELECT * FROM INSTRUCTOR_TABLE WHERE EXTRACT(MONTH FROM DATEOFJOINING) = 3;

-- 20. List the details of applicant whose email id contains a character ‘_’
SELECT * FROM APPLICANT_TABLE WHERE EMAILID LIKE '%\_%' ESCAPE '\';
UPDATE APPLICANT_TABLE SET EMAILID = 'JOTHI_PRAKASH@GMAIL.COM' WHERE APPLICANTNAME = 'JOTHI PRAKASH';

-- 21. List the applicant who do not have email id in their applicant detail information .
SELECT APPLICANTNAME FROM APPLICANT_TABLE WHERE EMAILID IS NULL;

-- 22. List the course Id which has project Marks in its course detail information.
SELECT COURSEID FROM COURSE_TABLE WHERE PROJECTMARKS IS NOT NULL;

-- TABLE DETAILS
DESC STUDENT_TABLE;
DESC REGISTRATION_TABLE;
DESC INSTRUCTOR_TABLE;
DESC HOSTEL_TABLE;
DESC DEPARTMENT_TABLE;
DESC COURSE_TABLE;
DESC COURSE_ALLOCATION_TABLE;
DESC BRANCH_TABLE;
DESC ATTENDANCE_TABLE;
DESC APPLICANT_TABLE;

SELECT * FROM TAB WHERE TNAME LIKE '%_TABLE';
        
ALTER TABLE BRANCH_TABLE DROP CONSTRAINT CHK_BRANCH;
ALTER TABLE BRANCH_TABLE DROP CONSTRAINT BRANCH_PK;
ALTER TABLE COURSE_TABLE DROP CONSTRAINT FK_BID;

ALTER TABLE BRANCH_TABLE MODIFY BRANCHID VARCHAR(3);
ALTER TABLE COURSE_TABLE MODIFY BRANCHID VARCHAR(3);

ALTER TABLE BRANCH_TABLE ADD CONSTRAINT BRANCH_PK PRIMARY KEY(BRANCHID);
ALTER TABLE BRANCH_TABLE ADD CONSTRAINT CHK_BRANCH CHECK(BRANCHID LIKE 'B%');
ALTER TABLE COURSE_TABLE ADD CONSTRAINT FK_BID FOREIGN KEY(BRANCHID) REFERENCES BRANCH_TABLE(BRANCHID);

ALTER TABLE REGISTRATION_TABLE DROP CONSTRAINT PK_COMPOID;
ALTER TABLE REGISTRATION_TABLE ADD CONSTRAINT PK_COMPOID PRIMARY KEY(STUDENTID, COURSEID);

ALTER TABLE DEPARTMENT_TABLE DISABLE CONSTRAINT FK_HODID;
ALTER TABLE DEPARTMENT_TABLE ENABLE CONSTRAINT FK_HODID;

-- DISPLAYING THE DATA
SELECT * FROM APPLICANT_TABLE;
SELECT * FROM BRANCH_TABLE;
SELECT * FROM COURSE_TABLE;
SELECT * FROM STUDENT_TABLE;
SELECT * FROM REGISTRATION_TABLE;
SELECT * FROM DEPARTMENT_TABLE;
SELECT * FROM INSTRUCTOR_TABLE;
SELECT * FROM COURSE_ALLOCATION_TABLE;
SELECT * FROM HOSTEL_TABLE;
SELECT * FROM ATTENDANCE_TABLE;


CREATE TABLE SAILORS(
    SAILOR_ID VARCHAR(3),
    SNAME VARCHAR(30),
    RATING NUMBER(2),
    AGE NUMBER(3),
    CONSTRAINT PK_SAILORID PRIMARY KEY(SAILOR_ID)
    );
    
CREATE TABLE BOATS(
    BOAT_ID VARCHAR(4),
    BNAME VARCHAR(30),
    COLOR VARCHAR(10),
    CONSTRAINT PK_BOATID PRIMARY KEY(BOAT_ID)
    );
    
CREATE TABLE RESERVE(
    SAILOR_ID VARCHAR(3),
    BOAT_ID VARCHAR(4),
    DATE_RESERVED DATE,
    CONSTRAINT PK_COMPO PRIMARY KEY(SAILOR_ID, BOAT_ID),
    CONSTRAINT FK_SAILORID FOREIGN KEY(SAILOR_ID) REFERENCES SAILORS(SAILOR_ID),
    CONSTRAINT FK_BOATID FOREIGN KEY(BOAT_ID) REFERENCES BOATS(BOAT_ID)
    );
    
DESC SAILORS;
INSERT INTO SAILORS VALUES('&SAILOR_ID', '&SNAME', '&RATING', '&AGE');
--INSERT INTO SAILORS VALUES('S1', 'SAILOR1', '8', '23');
--INSERT INTO SAILORS VALUES('S2', 'SAILOR2', '4', '31');
--INSERT INTO SAILORS VALUES('S3', 'SAILOR3', '7', '33');
--INSERT INTO SAILORS VALUES('S4', 'SAILOR4', '9', '43');

DESC BOATS;
INSERT INTO BOATS VALUES('&BOAT_ID', '&BNAME', '&COLOR');
--INSERT INTO BOATS VALUES('B1', 'BOAT1', 'BLACK');
--INSERT INTO BOATS VALUES('B2', 'BOAT2', 'GREEN');
--INSERT INTO BOATS VALUES('B3', 'BOAT3', 'BLACK');
--INSERT INTO BOATS VALUES('B4', 'BOAT4', 'BLUE');

DESC RESERVE;
INSERT INTO RESERVE VALUES('&SAILOR_ID', '&BOAT_ID', '&DATE_RESERVED');
--INSERT INTO RESERVE VALUES('S1', 'B1', '');
--INSERT INTO RESERVE VALUES('S2', 'B2', '22-MAR-2014');
--INSERT INTO RESERVE VALUES('S3', 'B3', '02-JAN-2013');
--INSERT INTO RESERVE VALUES('S4', 'B4', '08-APR-2015');
--INSERT INTO RESERVE VALUES('S1', 'B2', '');

SELECT SNAME FROM SAILORS WHERE SAILOR_ID IN (SELECT SAILOR_ID FROM RESERVE WHERE RESERVE.DATE_RESERVED IS NULL);

SELECT DISTINCT SAILORS.SNAME FROM SAILORS, BOATS, RESERVE WHERE SAILORS.AGE > 20 AND SAILORS.SAILOR_ID = RESERVE.SAILOR_ID AND BOATS.COLOR = 'BLACK';

SELECT SNAME FROM SAILORS, BOATS, RESERVE
    WHERE SAILORS.SAILOR_ID = RESERVE.SAILOR_ID AND BOATS.BOAT_ID = RESERVE.BOAT_ID AND COLOR = 'GREEN' AND DATE_RESERVED = '08-AUG-2017';

-- 5. RETRIEVE THE NAMES OF SAILORS WITH AGE OVER 20 YEARS AND HAVE RESERVED 'BLACK' BOAT
SELECT S.SNAME FROM SAILORS S, BOATS B, RESERVE R WHERE S.SAILOR_ID = R.SAILOR_ID AND B.BOAT_ID = R.BOAT_ID AND S.AGE > 20 AND B.COLOR = 'BLACK';

-- 6. RETRIEVE THE NAMES OF SAILORS WHO HAVE NOT RESERVED ANY BOAT.
SELECT S.SNAME FROM SAILORS S, BOATS B, RESERVE R WHERE S.SAILOR_ID = R.SAILOR_ID AND B.BOAT_ID = R.BOAT_ID AND R.DATE_RESERVED IS NULL;
--SELECT * FROM RESERVE;
    
SELECT * FROM SAILORS S, RESERVE R WHERE S.SAILOR_ID != R.SAILOR_ID;

-- 8. RETRIEVE THE NAMES OF SAILORS WHO IS THE OLDEST SAILOR WITH RATING 10.
SELECT S.SNAME FROM SAILORS S WHERE S.AGE IN (SELECT MAX(AGE) FROM SAILORS) AND S.RATING = 10;

-- 9. FIND THE NAME OF SAILOR WHO HAVE RESERVED ALL BOATS CALLED "STAR"
SELECT S.SNAME FROM SAILORS S, BOATS B, RESERVE R WHERE S.SAILOR_ID = R.SAILOR_ID(+) AND B.BOAT_ID = R.BOAT_ID;

SELECT SNAME,AGE FROM SAILORS WHERE AGE IN (SELECT AGE FROM SAILORS WHERE RATING = 9);

-- CREATING VIEWS
CREATE VIEW SB_VIEW
    AS SELECT S.SNAME, B.BNAME,  R.DATE_RESERVED
    FROM SAILORS S, BOATS B, RESERVE R
    WHERE S.SAILOR_ID = R.SAILOR_ID
    AND B.BOAT_ID = R.BOAT_ID;
    
DROP VIEW SB_VIEW;
    
CREATE FORCE VIEW; -- FORCING THE VIEW TO BE CREATED. IT WILL CREATE IT EVEN THE TABLE IS NOT EXISTING
DESC SB_VIEW;
INSERT INTO SB_VIEW VALUES('&SNAME', '&BNAME', '&DATE_RESERVED');
--INSERT INTO SB_VIEW VALUES('SAILOR1', 'BOAT1', '19-NOV-1993');

-- HORIZONTAL VIEWS
-- VERTICAL VIEWS
-- ROW/COLUMN VIEWS
-- GROUPED VIEWS
-- INDEX
-- SEQUENCE
-- TRIGGERS

SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME LIKE 'RESERVE';

-- FOREIGN KEY CONSTRAINT
SELECT DBMS_METADATA.GET_DDL('REF_CONSTRAINT', 'FK_SAILORID') FROM DUAL;

-- PRIMARY KEY CONSTRAINT
SELECT DBMS_METADATA.GET_DDL('CONSTRAINT', 'PK_COMPO') FROM DUAL;